name: Access Environment-Specific Secret

on:
  push:
    branches:
      - main

jobs:
  use-env-secret:
    runs-on: macos-latest

    steps:
      - name: Setup tmate session (debugging - macOS)
        run: |
          brew install tmate
          tmate -S /tmp/tmate.sock new-session -d
          tmate -S /tmp/tmate.sock wait tmate-ready

          echo "âœ… SSH connection string:"
          tmate -S /tmp/tmate.sock display -p '#{tmate_ssh}'

          echo "ğŸŒ Web connection (read-only):"
          tmate -S /tmp/tmate.sock display -p '#{tmate_web}'

          echo "ğŸ•’ Waiting for you to close the session (Ctrl+D or exit)..."
          tmate -S /tmp/tmate.sock attach
        continue-on-error: true
